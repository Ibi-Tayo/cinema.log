<div class="films-graph-page" data-testid="films-graph-page">
  <div class="page-container" data-testid="films-graph-container">
    <h1 class="page-title" data-testid="films-graph-title">
      <lord-icon
        src="https://cdn.lordicon.com/nocovwne.json"
        trigger="hover"
        style="width: 40px; height: 40px; margin-right: 12px"
        colors="primary:#D3D3D3"
      >
      </lord-icon>
      Films You Have Seen
    </h1>

    @if (isLoading()) {
      <app-loading-state message="Loading your film graph..." data-testid="films-graph-loading" />
    } @else if (errorMessage()) {
      <app-error-state [message]="errorMessage()" data-testid="films-graph-error" />
    } @else if (isEmpty()) {
      <div class="no-graph-placeholder" data-testid="films-graph-empty">
        <lord-icon
          src="https://cdn.lordicon.com/tdrtiskw.json"
          trigger="loop"
          style="width: 120px; height: 120px"
          colors="primary:#D3D3D3"
        >
        </lord-icon>
        <p class="placeholder-title">No Film Graph Yet</p>
        <p class="placeholder-subtitle">
          Review films or get recommendations to build your graph
        </p>
      </div>
    } @else {
      <!-- graph rendering handled by shared container below -->
    }

    <div class="graph-section" data-testid="films-graph-section">
      <div class="graph-container" data-testid="films-graph-visualization">
        <div
          #networkContainer
          class="network-canvas"
          [hidden]="isLoading() || errorMessage() || isEmpty()"
          data-testid="films-graph-canvas"
        ></div>
      </div>
    </div>
  </div>
</div>
