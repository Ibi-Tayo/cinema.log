<div class="nav-wrapper" data-testid="navbar-wrapper">
  <nav class="navbar" data-testid="navbar">
    <div class="nav-content" data-testid="navbar-content">
      <a
        class="logo"
        routerLink="home"
        routerLinkActive="active"
        ariaCurrentWhenActive="page"
        data-testid="navbar-logo"
        >_cinema.log()
      </a>
      <div class="nav-links" data-testid="navbar-links">
        <a
          routerLink="search"
          routerLinkActive="active"
          ariaCurrentWhenActive="page"
          data-testid="navbar-search-link"
          >Search
        </a>
        @if (auth.currentUser()) {
          <a
            [class.active]="isProfileAreaActive()"
            (click)="toggleProfileMenu($event); $event.preventDefault()"
            class="profile-link"
            data-testid="navbar-profile-link"
            >{{ auth.currentUser()?.name }}
          </a>
        } @else {
          <a
            class="sign-in"
            routerLink="login"
            routerLinkActive="active"
            ariaCurrentWhenActive="page"
            data-testid="navbar-signin-link"
            >Sign in
          </a>
        }
      </div>
    </div>
  </nav>
</div>

<!-- Profile menu - shared between desktop and mobile -->
@if (auth.currentUser()) {
  <p-menu #profileMenu [model]="menuItems" [popup]="true" />
}

<div class="nav-icons" data-testid="navbar-mobile-icons">
  <div class="icon">
    <a routerLink="search" ariaCurrentWhenActive="page" data-testid="navbar-mobile-search">
      <lord-icon
        routerLinkActive="active"
        src="https://cdn.lordicon.com/xaekjsls.json"
        trigger="click"
        stroke="bold"
        style="width: 30px; height: 30px"
      >
      </lord-icon>
      <p>Search</p>
    </a>
  </div>
  <div class="icon">
    <a routerLink="home" ariaCurrentWhenActive="page" data-testid="navbar-mobile-home">
      <lord-icon
        routerLinkActive="active"
        src="https://cdn.lordicon.com/jeuxydnh.json"
        trigger="click"
        stroke="bold"
        state="hover-wink"
        style="width: 30px; height: 30px"
      >
      </lord-icon>
      <p>Home</p>
    </a>
  </div>
  @if (auth.currentUser()) {
    <div class="icon">
      <a (click)="toggleProfileMenu($event); $event.preventDefault()" data-testid="navbar-mobile-profile">
        <lord-icon
          [class.active]="isProfileAreaActive()"
          src="https://cdn.lordicon.com/bushiqea.json"
          trigger="click"
          stroke="bold"
          style="width: 30px; height: 30px"
        >
        </lord-icon>
        <p>{{ auth.currentUser()?.name }}</p>
      </a>
    </div>
  } @else {
    <div class="icon">
      <a routerLink="login" ariaCurrentWhenActive="page" data-testid="navbar-mobile-login">
        <lord-icon
          routerLinkActive="active"
          src="https://cdn.lordicon.com/bushiqea.json"
          trigger="click"
          stroke="bold"
          style="width: 30px; height: 30px"
        >
        </lord-icon>
        <p>Login</p>
      </a>
    </div>
  }
</div>
